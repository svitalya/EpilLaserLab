import{d as _,u as y,b as C,_ as m,g as l,o as n,c as a,h as c,p as h,f as v,e as o,t as p,r as k,F as f,j as b,n as $,x}from"./index-Z3_fkCow.js";const E=_({data(){return{user:{login:""},title:"EpilLaserLab",imgSrc:""}},setup(){const t=y();return C(),{router:t,logoutBtnClic:async()=>{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),await t.push("/login-dashboard")}}},async beforeCreate(){fetch("/api/dashboard",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(async t=>{let s=await t.json();s.message=="OK"?fetch("/api/auth/user",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(async d=>{let r=await d.json();this.user=r.user,r.user.admin&&(this.title=`EpilLaserLab - ${r.user.admin.branch.address}`,this.imgSrc=`/resources/images/${r.user.admin.branch.photoPath}`)}):s.message=="ACCESS DENIED"&&(await this.toast.error("Вход в панель не разрешен"),await this.router.push("/login-dashboard"))}).catch(async()=>await this.router.push("/login-dashboard"))}}),j={class:"d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom"},B=["src"],T={class:"fs-4"},S={class:"navbar navbar-light bg-light p-3"},L={class:"col-12 col-md-12 col-lg-12 d-flex align-items-center justify-content-md-end mt-3 mt-md-0"},N={class:"dropdown"},I={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-expanded":"false"},M={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"};function V(t,s,d,r,g,w){const i=l("router-link");return n(),a("header",j,[c(i,{to:{name:"dashboard.home"},class:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none"},{default:h(()=>[t.imgSrc?(n(),a("img",{key:0,class:"bi me-2",width:"100",height:"100",src:t.imgSrc},null,8,B)):v("",!0),o("span",T,p(t.title),1)]),_:1}),o("nav",S,[o("div",L,[o("div",N,[o("button",I," Доброй пожаловать, "+p(t.user.login),1),o("ul",M,[o("li",null,[o("button",{class:"dropdown-item",onClick:s[0]||(s[0]=(...e)=>t.logoutBtnClic&&t.logoutBtnClic(...e))},"Выход ")])])])])])])}const D=m(E,[["render",V]]),F=_({setup(){const t=k({});return fetch("/api/dashboard/sidebar",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(async s=>{const d=await s.json();t.value=d.navItems}),{navItems:t}}}),G={id:"sidebar",class:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse"},H={class:"position-sticky pt-md-5"},J={class:"nav flex-column"},O=["innerHTML"],P={class:"ml-2 ms-2"},z={key:0,class:"dropdown-menu"};function A(t,s,d,r,g,w){const i=l("router-link");return n(),a("nav",G,[o("div",H,[o("ul",J,[(n(!0),a(f,null,b(t.navItems,e=>(n(),a("li",{class:$([e.dropdown&&e.dropdown.length>0?"nav-item":"","dropdown"])},[c(i,{tag:"a",class:$(["nav-link",e.dropdown&&e.dropdown.length>0?"dropdown-toggle":""]),"aria-current":"page","data-bs-toggle":[e.dropdown&&e.dropdown.length>0?"dropdown":""],"aria-expanded":"true",to:{name:e.link,params:e.params}},{default:h(()=>[(n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",innerHTML:e.svg},null,8,O)),o("span",P,p(e.text),1)]),_:2},1032,["class","data-bs-toggle","to"]),e.dropdown&&e.dropdown.length>0?(n(),a("ul",z,[(n(!0),a(f,null,b(e.dropdown,u=>(n(),a("li",null,[c(i,{to:{name:e.link,params:u.params},class:"dropdown-item"},{default:h(()=>[x(p(u.text),1)]),_:2},1032,["to"])]))),256))])):v("",!0)],2))),256))])])])}const K=m(F,[["render",A]]),R=_({components:{HeaderComponent:D,sidebar:K}}),q={class:"flex-container"},Q={class:"justify-content-center",style:{width:"95%"}},U={class:"container-fluid"},W={class:"row"},X={class:"col-10 ml-sm-auto px-md-4 py-4"},Y={class:"row col-12 d-flex justify-content-center"};function Z(t,s,d,r,g,w){const i=l("headerComponent"),e=l("sidebar"),u=l("router-view");return n(),a("div",q,[o("div",Q,[c(i),o("div",U,[o("div",W,[c(e),o("main",X,[o("div",Y,[c(u,{class:"row"})])])])])])])}const te=m(R,[["render",Z]]);export{te as default};

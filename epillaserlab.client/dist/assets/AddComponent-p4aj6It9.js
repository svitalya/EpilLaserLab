import{d as m,u as c,b as d,a as l,_ as p,g as f,o as b,c as h,e as o,w as _,v as y,h as w,p as C,m as N,x as v}from"./index-BabCA39_.js";const D=m({setup(){const e=c(),t=e.currentRoute.value.params.referencename,a=d(),u=l({name:""});return{data:u,submitForm:async i=>{if(u.name=="")return a.info("Введите значение");await fetch(`/api/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)}).then(async n=>{const s=await n.json();s.message=="OK"?(a.success("Запись успешно добавлена"),e.push({name:"dashboard.reference",params:{referencename:t}})):s.message=="DUPLICATION"?a.error("Дублирование записи"):s.message=="NOT CHANGED"?a.info("Внесите изменения"):s.message=="DATA NOT VALID"||s.status==400?a.error("Введите значения"):a.error("Ошибка при добавлении записи")}).catch(n=>e.push({name:"dashboard"}))},refName:t}}}),T={class:"form-group"},g=o("label",null,"Добавить запись",-1),A={class:"row mt-3"},O=o("button",{type:"submit",class:"btn btn-success me-3",style:{width:"120px"}},"Сохранить",-1);function x(e,t,a,u,r,i){const n=f("router-link");return b(),h("form",{class:"row col-3",onSubmit:t[1]||(t[1]=N((...s)=>e.submitForm&&e.submitForm(...s),["prevent"]))},[o("div",T,[g,_(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>e.data.name=s),class:"form-control mt-3",placeholder:"Введите значение"},null,512),[[y,e.data.name]])]),o("div",A,[O,w(n,{tag:"button",to:{name:"dashboard.reference",params:{referencename:e.refName}},type:"submit",class:"btn btn-secondary",style:{width:"120px"}},{default:C(()=>[v("Назад")]),_:1},8,["to"])])],32)}const V=p(D,[["render",x]]);export{V as default};

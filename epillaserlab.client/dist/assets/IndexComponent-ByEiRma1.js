import{d as _,s as y,u as C,_ as m,e as l,o as n,c as a,f as c,m as h,b as v,a as t,t as p,r as k,F as f,h as b,n as $,x}from"./index-DjdE6vYD.js";const E=_({data(){return{user:{login:""},title:"EpilLaserLab",imgSrc:""}},setup(){const o=y();return C(),{router:o,logoutBtnClic:async()=>{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),await o.push("/login-dashboard")}}},async beforeCreate(){fetch("/api/dashboard",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(async o=>{let s=await o.json();s.message=="OK"?fetch("/api/auth/user",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(async d=>{let r=await d.json();this.user=r.user,r.user.admin&&(this.title=`EpilLaserLab - ${r.user.admin.branch.address}`,this.imgSrc=`/resources/images/${r.user.admin.branch.photoPath}`)}):s.message=="ACCESS DENIED"&&(await this.toast.error("Вход в панель не разрешен"),await this.router.push("/login-dashboard"))}).catch(async()=>await this.router.push("/login-dashboard"))}}),B={class:"d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom"},T=["src"],j={class:"fs-4"},S={class:"navbar navbar-light bg-light p-3"},L={class:"col-12 col-md-12 col-lg-12 d-flex align-items-center justify-content-md-end mt-3 mt-md-0"},N={class:"dropdown"},I={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-expanded":"false"},M={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"};function V(o,s,d,r,g,w){const i=l("router-link");return n(),a("header",B,[c(i,{to:{name:"dashboard.home"},class:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none"},{default:h(()=>[o.imgSrc?(n(),a("img",{key:0,class:"bi me-2",width:"100",height:"100",src:o.imgSrc},null,8,T)):v("",!0),t("span",j,p(o.title),1)]),_:1}),t("nav",S,[t("div",L,[t("div",N,[t("button",I," Доброй пожаловать, "+p(o.user.login),1),t("ul",M,[t("li",null,[t("button",{class:"dropdown-item",onClick:s[0]||(s[0]=(...e)=>o.logoutBtnClic&&o.logoutBtnClic(...e))},"Выход ")])])])])])])}const D=m(E,[["render",V]]),F=_({setup(){const o=k({});return fetch("/api/dashboard/sidebar",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(async s=>{const d=await s.json();o.value=d.navItems}),{navItems:o}}}),G={id:"sidebar",class:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse"},H={class:"position-sticky pt-md-5"},J={class:"nav flex-column"},O=["innerHTML"],P={class:"ml-2 ms-2"},z={key:0,class:"dropdown-menu"};function A(o,s,d,r,g,w){const i=l("router-link");return n(),a("nav",G,[t("div",H,[t("ul",J,[(n(!0),a(f,null,b(o.navItems,e=>(n(),a("li",{class:$([e.dropdown&&e.dropdown.length>0?"nav-item":"","dropdown"])},[c(i,{tag:"a",class:$(["nav-link",e.dropdown&&e.dropdown.length>0?"dropdown-toggle":""]),"aria-current":"page","data-bs-toggle":[e.dropdown&&e.dropdown.length>0?"dropdown":""],"aria-expanded":"true",to:{name:e.link,params:e.params}},{default:h(()=>[(n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",innerHTML:e.svg},null,8,O)),t("span",P,p(e.text),1)]),_:2},1032,["class","data-bs-toggle","to"]),e.dropdown&&e.dropdown.length>0?(n(),a("ul",z,[(n(!0),a(f,null,b(e.dropdown,u=>(n(),a("li",null,[c(i,{to:{name:e.link,params:u.params},class:"dropdown-item"},{default:h(()=>[x(p(u.text),1)]),_:2},1032,["to"])]))),256))])):v("",!0)],2))),256))])])])}const K=m(F,[["render",A]]),R=_({components:{HeaderComponent:D,sidebar:K}}),q={class:"flex-container"},Q={style:{width:"80%"}},U={class:"container-fluid"},W={class:"row"},X={class:"col-10 ml-sm-auto px-md-4 py-4"},Y={class:"row col-12 d-flex justify-content-center"};function Z(o,s,d,r,g,w){const i=l("headerComponent"),e=l("sidebar"),u=l("router-view");return n(),a("div",q,[t("div",Q,[c(i),t("div",U,[t("div",W,[c(e),t("main",X,[t("div",Y,[c(u,{class:"row"})])])])])])])}const oe=m(R,[["render",Z]]);export{oe as default};

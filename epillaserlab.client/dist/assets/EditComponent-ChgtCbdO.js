import{d as h,B as m,b as p,u as _,a as f,r as v,_ as g,o as i,c,e as t,t as o,w,z as b,F as y,j as B,m as C}from"./index-DEormJ4l.js";const T=h({async beforeCreate(){await fetch("/api/categories?limit=1000",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(async s=>{let e=(await s.json()).data.recs;this.categories=e,this.data.categoryId=e[0].id}),await fetch(`/api/applications/${this.id}/short`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(async s=>{this.data=(await s.json()).data})},setup(){m();const s=p(),e=_(),n=e.currentRoute.value.params.id,r=f([{id:0,name:null}]),u=v({client:"",service:"",branch:"",master:"",dateTime:"",categoryId:0});return{data:u,categories:r,clickBtn:async()=>{await fetch(`/api/applications/${n}/category`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:u.value.categoryId.toString()}).then(async a=>{var l=await a.json();l.message=="OK"&&(s.success("Заявка успешно закрыта"),e.push({name:"dashboard.home"}))})},id:n}}}),j=t("div",{class:"flex-column"},[t("h1",{class:"row h3"}," Закрыть заявку ")],-1),k={class:"row form-group mt-3"},E={class:"h5"},I={class:"row form-group mt-3"},$={class:"h5"},A={class:"row form-group mt-3"},D={class:"h5"},F={class:"row form-group mt-3"},S={class:"h5"},G={class:"row form-group mt-3"},M={class:"h5"},R={class:"row form-group mt-3"},U=t("label",{class:"h5"},"Категория",-1),V={class:"col-12"},q=["value"],z=t("div",{class:"row mt-4"},[t("button",{type:"submit",class:"btn btn-success me-3",style:{width:"120px"}},"Сохранить")],-1);function K(s,e,n,r,u,d){return i(),c("div",null,[j,t("form",{onSubmit:e[1]||(e[1]=C((...a)=>s.clickBtn&&s.clickBtn(...a),["prevent"]))},[t("div",k,[t("label",E,"Клиент: "+o(s.data.client),1)]),t("div",I,[t("label",$,"Услуга: "+o(s.data.service),1)]),t("div",A,[t("label",D,"Филиал: "+o(s.data.branch),1)]),t("div",F,[t("label",S,"Мастер: "+o(s.data.master),1)]),t("div",G,[t("label",M,"Дата: "+o(s.data.dateTime),1)]),t("div",R,[U,t("div",V,[w(t("select",{class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>s.data.categoryId=a)},[(i(!0),c(y,null,B(s.categories,a=>(i(),c("option",{value:a.id},o(a.name),9,q))),256))],512),[[b,s.data.categoryId]])])]),z],32)])}const N=g(T,[["render",K]]);export{N as default};

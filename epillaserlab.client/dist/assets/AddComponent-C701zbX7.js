import{d as h,u as v,b as f,a as c,_ as b,g as _,o as i,c as r,e as s,w as a,y as D,F as y,j as w,v as l,h as g,p as C,m as T,t as I,x as E}from"./index-Z3_fkCow.js";import{D as F,I as O,O as A}from"./style-DXEi93YH.js";const N=h({components:{DataTable:F,TableBody:O,TableHead:A},beforeCreate(){fetch("/api/services?page=0&limit=999&order=name&sort=asc",{headers:{"Content-Type":"application/json"},credentials:"include"}).then(async t=>{let e=await t.json();e.message=="OK"&&(this.serviceData=e.data.recs,this.data.serviceId=this.serviceData[0].serviceId,this.$forceUpdate())})},setup(){const t=v(),e=f(),n=c({serviceId:null,sessions:null,validityPeriod:null,price:null});let d=c([{serviceId:0,name:""}]);return{data:n,submitForm:async p=>{await fetch("/api/seasontickets",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)}).then(async o=>{const u=await o.json();u.message=="OK"?(e.success("Запись успешно добавлена"),t.push({name:"dashboard.seasontickets"})):u.message=="DUPLICATION"?e.error("Дублирование записи"):u.message=="NOT CHANGED"?e.info("Внесите изменения"):u.message=="DATA NOT VALID"||u.status==400?e.error("Введите значения"):e.error("Ошибка при добавлении записи")}).catch(o=>t.push({name:"dashboard"}))},serviceData:d}}}),V=s("div",{class:"flex-column"},[s("h1",{class:"row h3"}," Добавить запись абонемента ")],-1),k={class:"col-3"},B={class:"row form-group mt-3"},U=s("label",{class:"h5"},"Услуга",-1),j={class:"col-12"},P=["value"],S={class:"row form-group mt-3"},$=s("label",{class:"h5"},"Посещений",-1),L={class:"col-12"},M={class:"row form-group mt-3"},H=s("label",{class:"h5"},"Дней действует",-1),J={class:"col-12"},K={class:"row form-group mt-3"},G=s("label",{class:"h5"},"Цена",-1),R={class:"col-12"},q={class:"row mt-4"},z=s("button",{type:"submit",class:"btn btn-success me-3",style:{width:"120px"}},"Сохранить",-1);function Q(t,e,n,d,m,p){const o=_("router-link");return i(),r("div",null,[V,s("form",{onSubmit:e[4]||(e[4]=T((...u)=>t.submitForm&&t.submitForm(...u),["prevent"])),class:"row mt-3"},[s("div",k,[s("div",B,[U,s("div",j,[a(s("select",{class:"form-control","onUpdate:modelValue":e[0]||(e[0]=u=>t.data.serviceId=u)},[(i(!0),r(y,null,w(t.serviceData,u=>(i(),r("option",{value:u.serviceId},I(u.name),9,P))),256))],512),[[D,t.data.serviceId]])])]),s("div",S,[$,s("div",L,[a(s("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=u=>t.data.sessions=u),class:"form-control",placeholder:"Введите количество посещений"},null,512),[[l,t.data.sessions]])])]),s("div",M,[H,s("div",J,[a(s("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=u=>t.data.validityPeriod=u),class:"form-control",placeholder:"Введите количество дней"},null,512),[[l,t.data.validityPeriod]])])]),s("div",K,[G,s("div",R,[a(s("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=u=>t.data.price=u),class:"form-control",placeholder:"Введите цену"},null,512),[[l,t.data.price]])])]),s("div",q,[z,g(o,{tag:"button",to:{name:"dashboard.seasontickets"},type:"submit",class:"btn btn-secondary",style:{width:"120px"}},{default:C(()=>[E("Назад")]),_:1})])])],32)])}const Y=b(N,[["render",Q]]);export{Y as default};
